{% extends 'base.html' %}
{% block title %}Announcements â€” Admin{% endblock %}
{% block content %}
  <section class="card">
    <h2>Announcements</h2>
    <p><a class="btn" href="{{ url_for('add_announcement') }}">Create new announcement</a></p>
    <table class="table">
      <thead><tr><th>Title</th><th>Message</th><th>Start</th><th>End</th><th>Active</th><th>Actions</th></tr></thead>
      <tbody>
        {% for a in announcements %}
          <tr>
            <td>{{ a.title }}</td>
            <td>{{ a.message }}</td>
            <td>{{ a.start_date or '-' }}</td>
            <td>{{ a.end_date or '-' }}</td>
            <td>{{ 'Yes' if a.active else 'No' }}</td>
            <td>
              <a class="btn small" href="{{ url_for('edit_announcement', aid=a.id) }}">Edit</a>
              <form method="post" action="{{ url_for('deactivate_announcement', aid=a.id) }}" style="display:inline;margin-left:6px">
                <button class="btn small" type="submit">Deactivate</button>
              </form>
              <form method="post" action="{{ url_for('delete_announcement', aid=a.id) }}" style="display:inline;margin-left:6px" onsubmit="return confirm('Delete this announcement?')">
                <button class="btn small" type="submit">Delete</button>
              </form>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </section>
{% endblock %}
